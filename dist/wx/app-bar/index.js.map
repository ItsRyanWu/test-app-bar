{"version":3,"file":"app-bar/index.js","mappings":";;;;;;;;AAAA,qBAAM;AACN,qBAAM;AACN,qBAAM;AACN,qBAAM;AACN,qBAAM;AACN;AACA,wBAAkO;AAClO;AACA,wBAAiK;AACjK;AACA,wBAAiJ;AACjJ;AACA,qBAAM;AACN,mBAAO,CAAC,GAAiI;;;;;;;;ACbzI;AACA,MAAM,IAAY;AAClB;AACA,IAAI,KAAK,kFAwCN;AACH;AACA;AACA,MAAM,IAAY;AAClB;AACA,IAAI,KAAK,EAEN;AACH;AACA;AACA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,IAAY;AAClB;AACA,IAAI,KAAK,EAEN;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,6BAA6B;AAC7B,oBAAoB;AACpB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvN8C;AAC9CA,uDAAe,CAAC;EACZC,IAAI,EAAE;IACFC,UAAU,EAAE,cAAc;IAC1BC,KAAK,EAAE,CACH;MACIC,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE,OAAO;MACbC,IAAI,EAAE;IACV,CAAC,EACD;MACIF,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE,OAAO;MACbC,IAAI,EAAE,cAAc;MACpBC,KAAK,EAAE;IACX,CAAC,EACD;MACIH,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE,QAAQ;MACdC,IAAI,EAAE;IACV,CAAC,CACJ;IACDE,QAAQ,EAAE,IAAI;IACdC,aAAa,EAAE,CAAC,KAAK,EAAE,KAAK;EAChC,CAAC;EACDC,SAAS,EAAE;IACPC,QAAQ,WAARA,QAAQA,CAAA,EAAG;MAAA,IAAAC,KAAA;MACP;MACA;MACA;MACA;MACA;MACA;MACA;MACAC,EAAE,CAACC,UAAU,CAAC,UAACC,CAAC,EAAK;QACjB,IAAMC,WAAW,GAAGD,CAAC,CAACT,IAAI;QAC1BM,KAAI,CAACK,UAAU,CAACD,WAAW,CAAC;MAChC,CAAC,CAAC;IACN;EACJ,CAAC;EACDE,QAAQ,EAAE;IACNC,WAAW,WAAXA,WAAWA,CAAA,EAAG;MACV,IAAMC,eAAe,GAAG,CAAC;MACzB,IAAMC,OAAO,GAAG,EAAE;MAClB,IAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAACJ,eAAe,EAAEC,OAAO,CAAC;MAClD,OAAO;QACHI,UAAU,EAAEL,eAAe;QAC3BM,aAAa,EAAEJ;MACnB,CAAC;IACL;EACJ,CAAC;EACDK,OAAO,EAAE;IACLV,UAAU,WAAVA,UAAUA,CAACW,WAAW,EAAE;MACpB,IAAI,CAAC1B,UAAU,GAAG,GAAG,GAAG0B,WAAW;IACvC,CAAC,CACD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACJ;AACJ,CAAC,CAAC;;;;;;;ACpHF,oBAAoB,mBAAO,CAAC,GAAiD;AAC7E,qBAAM;AACN;AACA;AACA,qBAAM;AACN,iFAAiF,yFAAyF;AAC1K;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;AACD;AACA","sources":["webpack://test-app-bar/./src/app-bar/index.mpx?43ac","webpack://test-app-bar/./node_modules/@mpxjs/webpack-plugin/lib/runtime/stringify.wxs","webpack://test-app-bar/./src/app-bar/index.mpx","webpack://test-app-bar/./src/app-bar/index.mpx?bb98"],"sourcesContent":["global.currentModuleId = \"_73e450bf\"\nglobal.currentResource = \"/Users/ryanwu/Documents/DC/test-app-bar/src/app-bar/index.mpx\"\nglobal.currentCtor = Component\nglobal.currentCtorType = \"component\"\nglobal.currentResourceType = \"component\"\n/* template */\nrequire.extract(\"./index.mpx.wxml!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!./index.mpx?ctorType=component&extract&hasScoped=false&index=0&isNative=false&moduleId=_73e450bf&mpx&type=template&usingComponents[]=dc-icon\")\n/* styles */\nrequire.extract(\"./index.mpx.scss!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!./index.mpx?extract&index=0&moduleId=_73e450bf&mpx&scoped=false&type=styles\")\n/* json */\nrequire.extract(\"./index.mpx.json?asScript!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!./index.mpx?asScript&extract&index=0&mpx&type=json\")\n/* script */\nglobal.currentSrcMode = \"wx\"\nrequire(\"./index.mpx.ts!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!./index.mpx?ctorType=component&index=0&lang=ts&mpx&type=script\")\n","function objectKeys(obj) {\n  if (!__mpx_wxs__) {\n    return Object.keys(obj);\n  } else {\n    var keys = [];\n    var stackMap = {\n      '{': '}',\n      '[': ']',\n      '(': ')'\n    };\n    if (typeof obj === 'object') {\n      var objStr = JSON.stringify(obj);\n      if (objStr[0] === '{' && objStr[objStr.length - 1] === '}') {\n        var inKey = true;\n        var stack = [];\n        var keyStart = 0;\n        var keyEnd = 0;\n        for (var i = 1; i < objStr.length - 1; i++) {\n          var item = objStr[i];\n          var lastItem = objStr[i - 1];\n          if (inKey) {\n            if (item === ':' && keyEnd === i - 1) {\n              keys.push(objStr.slice(keyStart + 1, keyEnd));\n              inKey = false;\n            } else {\n              if (item === '\"' && lastItem !== '\\\\') {\n                keyStart = keyEnd;\n                keyEnd = i;\n              }\n            }\n          } else {\n            if (stackMap[item]) {\n              stack.push(item);\n            } else if (stackMap[stack[stack.length - 1]] === item) {\n              stack.pop();\n            } else if (stack.length === 0 && item === ',') {\n              inKey = true;\n            }\n          }\n        }\n      }\n    }\n    return keys;\n  }\n}\nfunction genRegExp(str, flags) {\n  if (!__mpx_wxs__) {\n    return new RegExp(str, flags);\n  } else {\n    return new RegExp(str, flags);\n  }\n}\nfunction extend(target, from) {\n  var fromKeys = objectKeys(from);\n  for (var i = 0; i < fromKeys.length; i++) {\n    var key = fromKeys[i];\n    target[key] = from[key];\n  }\n  return target;\n}\nfunction concat(a, b) {\n  return a ? b ? a + ' ' + b : a : b || '';\n}\nfunction isObject(obj) {\n  return obj !== null && typeof obj === 'object';\n}\nfunction isArray(arr) {\n  if (!__mpx_wxs__) {\n    return Array.isArray(arr);\n  } else {\n    return arr && arr.constructor.name === 'Array';\n  }\n}\nvar escapeMap = {\n  '(': '_pl_',\n  ')': '_pr_',\n  '[': '_bl_',\n  ']': '_br_',\n  '{': '_cl_',\n  '#': '_h_',\n  '!': '_i_',\n  '/': '_s_',\n  '.': '_d_',\n  ':': '_c_',\n  ',': '_2c_',\n  '%': '_p_',\n  // wxs can not use '\\'' as key\n  // wxs环境中'\\''!==\"'\"，此文件不能格式化，否则会导致程序错误\n  \"'\": '_q_',\n  // wxs can not use '\"' as key\n  '\"': '_dq_',\n  '+': '_a_',\n  '$': '_si_'\n};\nvar escapeReg = genRegExp('[()[\\]{}#!/.:,%\\'\"+$]', 'g');\nfunction mpEscape(str) {\n  return str.replace(escapeReg, function (match) {\n    if (escapeMap[match]) return escapeMap[match];\n    // fix wxs can not use '}' as key\n    if (match === '}') return '_cr_';\n    // unknown escaped\n    return '_u_';\n  });\n}\nfunction stringifyDynamicClass(value) {\n  if (isArray(value)) {\n    value = stringifyArray(value);\n  } else if (isObject(value)) {\n    value = stringifyObject(value);\n  }\n  if (typeof value === 'string') {\n    return value;\n  } else {\n    return '';\n  }\n}\nfunction stringifyArray(value) {\n  var res = '';\n  var classString;\n  for (var i = 0; i < value.length; i++) {\n    if (classString = stringifyDynamicClass(value[i])) {\n      if (res) res += ' ';\n      res += classString;\n    }\n  }\n  return res;\n}\nvar mpxEscapeReg = genRegExp('(.+)MpxEscape$');\nvar dashEscapeReg = genRegExp('_da_', 'g');\nvar spaceEscapeReg = genRegExp('_sp_', 'g');\nfunction stringifyObject(value) {\n  var res = '';\n  var objKeys = objectKeys(value);\n  for (var i = 0; i < objKeys.length; i++) {\n    var key = objKeys[i];\n    if (value[key]) {\n      if (res) res += ' ';\n      if (mpxEscapeReg.test(key)) {\n        key = mpxEscapeReg.exec(key)[1].replace(dashEscapeReg, '-').replace(spaceEscapeReg, ' ');\n      }\n      res += key;\n    }\n  }\n  return res;\n}\nfunction hump2dash(value) {\n  var reg = genRegExp('[A-Z]', 'g');\n  return value.replace(reg, function (match) {\n    return '-' + match.toLowerCase();\n  });\n}\nfunction dash2hump(value) {\n  var reg = genRegExp('-([a-z])', 'g');\n  return value.replace(reg, function (match, p1) {\n    return p1.toUpperCase();\n  });\n}\nfunction parseStyleText(cssText) {\n  var res = {};\n  var listDelimiter = genRegExp(';(?![^(]*[)])', 'g');\n  var propertyDelimiter = genRegExp(':(.+)');\n  var arr = cssText.split(listDelimiter);\n  for (var i = 0; i < arr.length; i++) {\n    var item = arr[i];\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      if (tmp.length > 1) {\n        var k = dash2hump(tmp[0].trim());\n        res[k] = tmp[1].trim();\n      }\n    }\n  }\n  return res;\n}\nfunction genStyleText(styleObj) {\n  var res = '';\n  var objKeys = objectKeys(styleObj);\n  for (var i = 0; i < objKeys.length; i++) {\n    var key = objKeys[i];\n    var item = styleObj[key];\n    res += hump2dash(key) + ':' + item + ';';\n  }\n  return res;\n}\nfunction mergeObjectArray(arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res;\n}\nfunction normalizeDynamicStyle(value) {\n  if (!value) return {};\n  if (isArray(value)) {\n    return mergeObjectArray(value);\n  }\n  if (typeof value === 'string') {\n    return parseStyleText(value);\n  }\n  return value;\n}\nmodule.exports = {\n  stringifyClass: function (staticClass, dynamicClass) {\n    if (typeof staticClass !== 'string') {\n      return console.log('Template attr class must be a string!');\n    }\n    return concat(staticClass, mpEscape(stringifyDynamicClass(dynamicClass)));\n  },\n  stringifyStyle: function (staticStyle, dynamicStyle) {\n    var normalizedDynamicStyle = normalizeDynamicStyle(dynamicStyle);\n    var parsedStaticStyle = typeof staticStyle === 'string' ? parseStyleText(staticStyle) : {};\n    return genStyleText(extend(parsedStaticStyle, normalizedDynamicStyle));\n  }\n};","import { createComponent } from '@mpxjs/core';\ncreateComponent({\n    data: {\n        activePath: '/pages/index',\n        items: [\n            {\n                name: '分数',\n                icon: 'chart',\n                path: '/pages/index'\n            },\n            {\n                name: '任务',\n                icon: 'badge',\n                path: '/pages/index',\n                count: true\n            },\n            {\n                name: '报告',\n                icon: 'report',\n                path: '/pages/index'\n            }\n        ],\n        isHidden: true,\n        skipAnimation: [false, false]\n    },\n    lifetimes: {\n        attached() {\n            // app.log('Tab bar mounted')\n            // const path = getCurrentPagePath() as Route\n            // this.setVisible(path)\n            // this.calcHeight()\n            // // This event behave differently on iOS and Android when call 'didPop' method from cutsom route context\n            // // It doesn't respond instantly on iOS\n            // @ts-ignore\n            wx.onAppRoute((e) => {\n                const currentPage = e.path;\n                this.setVisible(currentPage);\n            });\n        }\n    },\n    computed: {\n        tabbarStyle() {\n            const originalPadding = 8;\n            const reduced = 30;\n            const padding = Math.max(originalPadding, reduced);\n            return {\n                paddingTop: originalPadding,\n                paddingBottom: padding\n            };\n        }\n    },\n    methods: {\n        setVisible(currentPath) {\n            this.activePath = '/' + currentPath;\n        }\n        // switch(item: Item) {\n        //   if (this.activePath === item.path) return\n        //   app.vibrate()\n        //   this.activePath = item.path\n        //   wx.switchTab({\n        //     url: item.path,\n        //     routeType: CustomRouteType.Tab,\n        //     fail: (e) => {\n        //       console.log(e)\n        //     }\n        //   })\n        // },\n        // calcHeight() {\n        //   const query = this.createSelectorQuery()\n        //   query.select('.tabbar').boundingClientRect()\n        //   app.log('Tab bar caculate layout')\n        //   const timer = setTimeout(() => {\n        //     this.handleTabbarRenderFailure()\n        //   }, 1000)\n        //   query.exec((res) => {\n        //     clearTimeout(timer)\n        //     const currentPage = getCurrentPagePath() as Route\n        //     const isTabPage = tabRoutes.some((route) => isSameRoute(route, currentPage))\n        //     app.log(`Tab bar caculate layout: isTabPage ${isTabPage}`)\n        //     const { height, bottom, left, right, top, width } = res[0]\n        //     const dimension = { height, bottom, left, right, top, width }\n        //     app.log(`Tab bar caculate layout: ${JSON.stringify(dimension)}`)\n        //     tabbarHeight.value = height\n        //     // Suspect sometimes the component wouldn't render\n        //     if (!height) {\n        //       this.handleTabbarRenderFailure()\n        //     }\n        //   })\n        // },\n        // show() {\n        //   this.isHidden = false\n        // },\n        // hide() {\n        //   this.isHidden = true\n        // },\n        // handleTabbarRenderFailure() {\n        //   app.catchError('Tabbar render failed')\n        //   wx.reportEvent(WeDataEvent.TabbarRenderError)\n        //   wx.showModal({\n        //     title: '出现了一点问题',\n        //     content: '请尝试刷新页面解决',\n        //     confirmText: '刷新页面',\n        //     cancelText: '继续浏览',\n        //     success(res) {\n        //       if (res.confirm) {\n        //         app.vibrate()\n        //         const currentPath = getCurrentPagePath()\n        //         const enterOption = wx.getEnterOptionsSync()\n        //         const query = objectToQueryString(enterOption.query)\n        //         app.log(`Relaunch MP on page:`, '/' + currentPath + query)\n        //         wx.reLaunch({ url: '/' + currentPath + query })\n        //       }\n        //     }\n        //   })\n        // }\n    }\n});\n","var __stringify__ = require(\"@mpxjs/webpack-plugin/lib/runtime/stringify.wxs\");\nglobal.currentInject = {\n  moduleId: \"_73e450bf\"\n};\nglobal.currentInject.render = function (_i, _c, _r, _sc) {\n\"padding-top:\" + _c(\"tabbarStyle.paddingTop\", this.tabbarStyle.paddingTop) + \"px;padding-bottom:\" + _c(\"tabbarStyle.paddingBottom\", this.tabbarStyle.paddingBottom) + \"px;\";\n_i(_sc(\"items\", this.items), function (item, index) {\n  item.path;\n  __stringify__.stringifyClass(\"tabbar-item flex flex-col justify-center items-center flex-auto p-2.5\", {\n    ml_da_3MpxEscape: index !== 0\n  });\n  ({\n    tap: [[\"switch\", item]]\n  });\n  item.icon;\n  item.name;\n});\n_r();\n};\n"],"names":["createComponent","data","activePath","items","name","icon","path","count","isHidden","skipAnimation","lifetimes","attached","_this","wx","onAppRoute","e","currentPage","setVisible","computed","tabbarStyle","originalPadding","reduced","padding","Math","max","paddingTop","paddingBottom","methods","currentPath"],"sourceRoot":""}